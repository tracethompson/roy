<script>
	import { fly } from 'svelte/transition';
	import { goto } from '$app/navigation';
	import { tick } from 'svelte';

	export let x, y, href, hover;
	let closed = true;
	export let selfClick = false;
	function handleTransEnd(e) {
		if (selfClick) {
			tick();
			goto(href);
		}
	}
</script>

{#if !selfClick}
	<g
		out:fly={{ y: 70, duration: selfClick ? 400 : 0 }}
		on:outroend|self={handleTransEnd}
		width="150"
		height="156"
		viewBox="0 0 150 156"
		transform="translate({x} {y})"
		fill="none"
		xmlns="http://www.w3.org/2000/svg"
	>
		<a
			{href}
			sveltekit:prefetch
			on:click|preventDefault={() => {
				selfClick = true;
			}}
		>
			<g id="Elevator">
				<g id="WallAndCeiling" opacity="0.7">
					<g id="Union">
						<mask id="path-1-inside-1" fill="white">
							<path
								fill-rule="evenodd"
								clip-rule="evenodd"
								d="M149.541 45.5631L80 85.7125L80 155.229L149.541 115.08L149.541 45.5631ZM79.9545 85.6762L149.586 45.4744L70.822 8.31797e-05L1.1906 40.2018L79.9545 85.6762Z"
							/>
						</mask>
						<path
							fill-rule="evenodd"
							clip-rule="evenodd"
							d="M149.541 45.5631L80 85.7125L80 155.229L149.541 115.08L149.541 45.5631ZM79.9545 85.6762L149.586 45.4744L70.822 8.31797e-05L1.1906 40.2018L79.9545 85.6762Z"
							fill="#DFDFDF"
							fill-opacity="0.71"
						/>
						<path
							d="M80 85.7125L79.5 84.8464L79 85.1351L79 85.7125L80 85.7125ZM149.541 45.5631L150.541 45.5631L150.541 43.8311L149.041 44.6971L149.541 45.5631ZM80 155.229L79 155.229L79 156.962L80.5 156.096L80 155.229ZM149.541 115.08L150.041 115.946L150.541 115.658L150.541 115.08L149.541 115.08ZM149.586 45.4744L150.086 46.3405L151.586 45.4744L150.086 44.6084L149.586 45.4744ZM79.9545 85.6762L79.4545 86.5422L79.9545 86.8309L80.4545 86.5422L79.9545 85.6762ZM70.822 8.31797e-05L71.322 -0.865942L70.822 -1.15462L70.322 -0.865942L70.822 8.31797e-05ZM1.1906 40.2018L0.690603 39.3358L-0.809397 40.2018L0.690603 41.0678L1.1906 40.2018ZM80.5 86.5785L150.041 46.4292L149.041 44.6971L79.5 84.8464L80.5 86.5785ZM81 155.229L81 85.7125L79 85.7125L79 155.229L81 155.229ZM149.041 114.214L79.5 154.363L80.5 156.096L150.041 115.946L149.041 114.214ZM148.541 45.5631L148.541 115.08L150.541 115.08L150.541 45.5631L148.541 45.5631ZM149.086 44.6084L79.4545 84.8101L80.4545 86.5422L150.086 46.3405L149.086 44.6084ZM70.322 0.866109L149.086 46.3405L150.086 44.6084L71.322 -0.865942L70.322 0.866109ZM1.6906 41.0678L71.322 0.866109L70.322 -0.865942L0.690603 39.3358L1.6906 41.0678ZM80.4545 84.8101L1.6906 39.3358L0.690603 41.0678L79.4545 86.5422L80.4545 84.8101Z"
							fill="#BCBCBC"
							mask="url(#path-1-inside-1)"
						/>
					</g>
				</g>
				<g id="Label">
					<path
						id="Vector"
						d="M11.1712 49.7176L3.27119 45.1566C3.19925 45.1151 3.13027 45.1083 3.07942 45.1377C3.02856 45.1671 3 45.2303 3 45.3134L3 54.4353C3.00003 54.5184 3.0286 54.6145 3.07945 54.7026C3.13029 54.7907 3.19925 54.8636 3.27119 54.9052L11.1712 59.4663C11.2068 59.4869 11.2421 59.4992 11.2751 59.5025C11.308 59.5057 11.3379 59.4999 11.3631 59.4854C11.3883 59.4708 11.4083 59.4478 11.422 59.4177C11.4356 59.3875 11.4426 59.3508 11.4426 59.3096L11.4426 50.1877C11.4426 50.1466 11.4356 50.1018 11.422 50.0559C11.4083 50.01 11.3883 49.9639 11.3631 49.9202C11.3379 49.8766 11.308 49.8362 11.2751 49.8014C11.2421 49.7667 11.2068 49.7382 11.1712 49.7176V49.7176ZM4.07883 46.8683L10.364 50.4971L10.364 57.7545L4.07883 54.1258L4.07883 46.8683Z"
						fill="white"
					/>
					<path
						id="Vector_2"
						d="M13.3008 57.5582L12.9905 57.3791L12.9905 56.4173C12.9905 56.4075 12.9889 56.397 12.9857 56.3861C12.9825 56.3753 12.9777 56.3644 12.9718 56.3541C12.9658 56.3438 12.9588 56.3342 12.951 56.326C12.9432 56.3178 12.9349 56.311 12.9265 56.3062L12.3523 55.9747C12.3439 55.9698 12.3356 55.9669 12.3278 55.9662C12.32 55.9654 12.3129 55.9668 12.307 55.9702C12.301 55.9737 12.2963 55.9791 12.2931 55.9863C12.2899 55.9934 12.2883 56.0021 12.2883 56.0118L12.2883 56.9735L11.9779 56.7943C11.9661 56.7876 11.9547 56.7848 11.9447 56.7862C11.9347 56.7875 11.9265 56.793 11.9212 56.8019C11.9158 56.8109 11.9134 56.823 11.9142 56.837C11.915 56.851 11.919 56.8663 11.9258 56.8813L12.5894 58.3355C12.5953 58.3485 12.6031 58.3608 12.6121 58.3714C12.6212 58.3819 12.6312 58.3905 12.6414 58.3964L12.6415 58.3964C12.6517 58.4023 12.6617 58.4053 12.6708 58.4051C12.6799 58.405 12.6877 58.4016 12.6936 58.3954L13.353 57.7052C13.3598 57.6981 13.3639 57.6874 13.3647 57.6743C13.3655 57.6613 13.3631 57.6463 13.3577 57.6311C13.3523 57.6159 13.3442 57.6011 13.3341 57.5882C13.3241 57.5754 13.3125 57.565 13.3008 57.5582V57.5582Z"
						fill="white"
					/>
					<path
						id="Vector_3"
						d="M11.9818 53.3242L12.2921 53.5034L12.2921 54.4652C12.2921 54.5061 12.3209 54.5557 12.3563 54.5763L12.9304 54.9077C12.9388 54.9125 12.9472 54.9155 12.9549 54.9162C12.9627 54.917 12.9698 54.9156 12.9757 54.9122C12.9817 54.9088 12.9864 54.9033 12.9896 54.8962C12.9928 54.8891 12.9945 54.8804 12.9945 54.8707L12.9945 53.9089L13.3048 54.0881C13.3166 54.0949 13.3282 54.0978 13.3382 54.0965C13.3483 54.0952 13.3564 54.0898 13.3618 54.0808C13.3672 54.0718 13.3696 54.0597 13.3687 54.0456C13.3679 54.0316 13.3638 54.0162 13.357 54.0012L12.6934 52.5471C12.6875 52.5341 12.6797 52.5218 12.6706 52.5112C12.6616 52.5005 12.6515 52.4919 12.6414 52.486L12.6412 52.4859C12.631 52.4801 12.6209 52.4772 12.6119 52.4774C12.6028 52.4776 12.595 52.4809 12.589 52.4871L11.9297 53.1773C11.923 53.1845 11.9189 53.1951 11.9181 53.2082C11.9173 53.2212 11.9197 53.2361 11.9251 53.2513C11.9305 53.2665 11.9386 53.2813 11.9486 53.2941C11.9586 53.307 11.9701 53.3174 11.9818 53.3242V53.3242Z"
						fill="white"
					/>
					<path
						id="Vector_4"
						d="M5.81469 49.8778C6.1093 50.0479 6.34813 49.91 6.34813 49.5698C6.34813 49.2296 6.1093 48.816 5.81469 48.6459C5.52008 48.4758 5.28125 48.6137 5.28125 48.9539C5.28125 49.294 5.52008 49.7077 5.81469 49.8778Z"
						fill="white"
					/>
					<path
						id="Vector_5"
						d="M6.82647 50.6264L6.82647 50.6235L4.91533 49.5201L4.91533 49.5222C4.84905 49.4839 4.78545 49.4775 4.73842 49.5042C4.69138 49.531 4.66473 49.5889 4.66428 49.6651L4.66406 49.665L4.66406 51.4104L4.66654 51.4118C4.66654 51.4805 4.69016 51.56 4.73222 51.6328C4.77428 51.7057 4.83131 51.7659 4.89079 51.8002C4.95026 51.8345 5.0073 51.8402 5.04936 51.8159C5.09141 51.7916 5.11504 51.7394 5.11504 51.6707L5.11558 51.671L5.11558 50.4525L5.11622 50.4529C5.11689 50.432 5.12466 50.4164 5.13791 50.4092C5.15116 50.4021 5.16885 50.404 5.18728 50.4146C5.22582 50.4369 5.25682 50.49 5.25844 50.535L5.25908 50.5354L5.25908 53.7303C5.25911 53.7701 5.26591 53.8135 5.27912 53.8578C5.29232 53.9022 5.31167 53.9467 5.33604 53.9889C5.36042 54.0311 5.38935 54.0701 5.42119 54.1037C5.45303 54.1373 5.48715 54.1648 5.52161 54.1847C5.55606 54.2045 5.59017 54.2164 5.622 54.2195C5.65382 54.2226 5.68273 54.217 5.70708 54.2029C5.73142 54.1888 5.75073 54.1665 5.7639 54.1374C5.77706 54.1082 5.78383 54.0727 5.78381 54.0329L5.78381 52.4242L5.78574 52.4253C5.78574 52.4031 5.7934 52.3861 5.80703 52.3783C5.82066 52.3704 5.83914 52.3722 5.85841 52.3834C5.87769 52.3945 5.89617 52.414 5.9098 52.4376C5.92343 52.4612 5.93108 52.487 5.93108 52.5092L5.93291 52.5103L5.93291 54.119C5.93487 54.199 5.96337 54.2903 6.01236 54.3735C6.06135 54.4568 6.12696 54.5254 6.19527 54.5649C6.26358 54.6043 6.3292 54.6114 6.37819 54.5847C6.42718 54.5581 6.45568 54.4997 6.45763 54.4219L6.45763 51.2275C6.45726 51.2161 6.45884 51.206 6.46227 51.1975C6.4657 51.1891 6.47092 51.1826 6.47761 51.1784C6.4843 51.1743 6.49232 51.1725 6.5012 51.1733C6.51008 51.174 6.51963 51.1773 6.52928 51.1829C6.53893 51.1884 6.54848 51.1962 6.55736 51.2057C6.56624 51.2152 6.57426 51.2262 6.58095 51.2381C6.58764 51.25 6.59286 51.2625 6.59629 51.2749C6.59972 51.2873 6.6013 51.2993 6.60093 51.3102L6.60093 52.5287L6.6034 52.5302C6.6034 52.5989 6.62703 52.6784 6.6691 52.7512C6.71117 52.8241 6.76822 52.8843 6.82771 52.9187C6.8872 52.953 6.94425 52.9587 6.98631 52.9344C7.02838 52.9101 7.05201 52.8579 7.05201 52.7892L7.05244 52.7894L7.05244 51.0441C7.05221 50.9723 7.02899 50.8898 6.98725 50.8127C6.94551 50.7356 6.88823 50.6692 6.82647 50.6264V50.6264Z"
						fill="white"
					/>
					<path
						id="Vector_6"
						d="M8.54126 51.452C8.83587 51.6221 9.0747 51.4842 9.0747 51.144C9.0747 50.8039 8.83587 50.3902 8.54126 50.2201C8.24664 50.05 8.00781 50.1879 8.00781 50.5281C8.00781 50.8683 8.24664 51.2819 8.54126 51.452Z"
						fill="white"
					/>
					<path
						id="Vector_7"
						d="M9.55303 52.2016L9.55303 52.1987L7.6419 51.0953L7.6419 51.0974C7.57561 51.0591 7.51201 51.0527 7.46498 51.0794C7.41795 51.1062 7.3913 51.1641 7.39084 51.2403L7.39062 51.2402L7.39062 52.9856L7.3931 52.987C7.3931 53.0557 7.41673 53.1352 7.45878 53.208C7.50084 53.2808 7.55788 53.3411 7.61735 53.3754C7.67683 53.4097 7.73387 53.4154 7.77592 53.3911C7.81798 53.3668 7.8416 53.3146 7.8416 53.2459L7.84214 53.2462L7.84214 52.0277L7.84279 52.0281C7.84345 52.0072 7.85123 51.9916 7.86447 51.9844C7.87772 51.9773 7.89541 51.9792 7.91384 51.9898C7.95238 52.0121 7.98339 52.0652 7.985 52.1102L7.98565 52.1106L7.98565 55.3055C7.98569 55.3859 8.01337 55.4789 8.06261 55.5641C8.08698 55.6063 8.11592 55.6453 8.14776 55.6789C8.1796 55.7125 8.21372 55.74 8.24817 55.7599C8.28262 55.7797 8.31674 55.7916 8.34856 55.7947C8.38038 55.7978 8.40929 55.7922 8.43364 55.7781C8.45799 55.764 8.47729 55.7417 8.49046 55.7126C8.50363 55.6834 8.51039 55.6479 8.51037 55.6081L8.51037 53.9994L8.51231 54.0005C8.51231 53.9782 8.51996 53.9613 8.53359 53.9535C8.54722 53.9456 8.5657 53.9474 8.58498 53.9585C8.60425 53.9697 8.62273 53.9892 8.63636 54.0128C8.64999 54.0364 8.65764 54.0622 8.65764 54.0844L8.65947 54.0855L8.65947 55.6942C8.66143 55.7742 8.68993 55.8655 8.73892 55.9487C8.78791 56.032 8.85353 56.1006 8.92184 56.1401C8.99015 56.1795 9.05576 56.1866 9.10475 56.1599C9.15374 56.1333 9.18224 56.0749 9.1842 55.9971L9.1842 52.8027C9.18382 52.7913 9.1854 52.7811 9.18883 52.7727C9.19226 52.7643 9.19748 52.7578 9.20417 52.7536C9.21086 52.7495 9.21889 52.7477 9.22776 52.7485C9.23664 52.7492 9.24619 52.7525 9.25584 52.7581C9.26549 52.7636 9.27504 52.7714 9.28392 52.7809C9.2928 52.7904 9.30083 52.8014 9.30752 52.8133C9.31421 52.8252 9.31942 52.8377 9.32285 52.8501C9.32629 52.8625 9.32786 52.8745 9.32749 52.8854L9.32749 54.1039L9.32997 54.1054C9.32997 54.1741 9.3536 54.2536 9.39566 54.3264C9.43773 54.3993 9.49478 54.4595 9.55427 54.4939C9.61376 54.5282 9.67081 54.5339 9.71288 54.5096C9.75494 54.4853 9.77857 54.4331 9.77857 54.3644L9.779 54.3646L9.779 52.6193C9.77875 52.5475 9.75552 52.465 9.71378 52.3879C9.67205 52.3108 9.61478 52.2444 9.55303 52.2016V52.2016Z"
						fill="white"
					/>
				</g>
				<rect
					id="InnerWall"
					width="48.4974"
					height="60.7255"
					transform="matrix(0.866025 0.5 -2.20305e-08 1 15 56.7207)"
					fill="#C4C4C4"
				/>
				<path id="FloorLining" d="M15 117.5L57 93" stroke="white" stroke-width="0.5" />
				<path id="Floor" d="M57 93.5L15.5 117.5L57 141.5V93.5Z" fill="#9B9B9B" />
				<path
					id="WallOutline"
					d="M79.0039 154.626L1.00488 110.295L1.00487 41.6758L79.0039 86.0069L79.0039 154.626Z"
					stroke="white"
				/>
				<rect
					id="Door"
					class:closed
					height="60.7255"
					transform="matrix(-0.866025 -0.5 -2.20305e-08 1 57 81.248)"
					fill="#C0C0C0"
				/>
			</g>
		</a>
	</g>
{/if}

<style>
	#Door {
		transition: width 1s ease;
		width: 0px;
	}
	g:hover #Door,
	g.hover #Door {
		width: 48px;
	}
</style>
